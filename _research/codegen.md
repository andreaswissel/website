---
topic: Verified Code Generation
icon: fa-cogs
pubs:
  - title: "Lazifying case constants"
    id: "afp-lazy-case"
    authors: ["lars"]
    in: "Archive of Formal Proofs"
    year: 2017
    entry: "https://www.isa-afp.org/entries/Lazy_Case.html"
    abstract: |
      Isabelle's code generator performs various adaptations for target languages. Among others, case statements are printed as match expressions. Internally, this is a sophisticated procedure, because in HOL, case statements are represented as nested calls to the case combinators as generated by the datatype package. Furthermore, the procedure relies on laziness of match expressions in the target language, i.e., that branches guarded by patterns that fail to match are not evaluated. Similarly, if-then-else is printed to the corresponding construct in the target language. This entry provides tooling to replace these special cases in the code generator by ignoring these target language features, instead printing case expressions and if-then-else as functions.
  - title: "Constructor Functions"
    id: "afp-constructor-funs"
    authors: ["lars"]
    in: "Archive of Formal Proofs"
    year: 2017
    entry: "https://www.isa-afp.org/entries/Constructor_Funs.html"
    abstract: |
      Isabelle's code generator performs various adaptations for target languages. Among others, constructor applications have to be fully saturated. That means that for constructor calls occuring as arguments to higher-order functions, synthetic lambdas have to be inserted. This entry provides tooling to avoid this construction altogether by introducing constructor functions.
  - title: "Dictionary Construction"
    id: "afp-dict"
    authors: ["lars"]
    in: "Archive of Formal Proofs"
    year: 2017
    entry: "https://www.isa-afp.org/entries/Dict_Construction.html"
    abstract: |
      Isabelle's code generator natively supports type classes. For targets that do not have language support for classes and instances, it performs the well-known dictionary translation, as described by Haftmann and Nipkow. This translation happens outside the logic, i.e., there is no guarantee that it is correct, besides the pen-and-paper proof. This work implements a certified dictionary translation that produces new class-free constants and derives equality theorems.
  - title: "A Verified Compiler from Isabelle/HOL to CakeML"
    id: "isabelle-cakeml"
    authors: ["lars", "tobias"]
    in: "European Symposium on Programming (ESOP, Open Access)"
    errata: true
    springer: true
    year: 2018
    doi: "10.1007/978-3-319-89884-1_35"
    slides: "https://speakerdeck.com/larsrh/hol-to-cakeml"
    abstract: |
      Many theorem provers can generate functional programs from definitions
      or proofs. However, this code generation needs to be trusted. Except for
      the HOL4 system, which has a proof producing code generator for a subset of ML.
      We go one step further and provide a verified compiler from Isabelle/HOL to CakeML. More precisely we combine a simple proof producing translation of recursion equations in Isabelle/HOL into a deeply embedded term language with a fully verified compilation chain to the target language CakeML.
  - title: "Isabelle/CakeML"
    id: "afp-cakeml"
    authors: ["lars", "yu"]
    entry: "https://www.isa-afp.org/entries/CakeML.html"
    in: "Archive of Formal Proofs"
    year: 2018
    abstract: |
      CakeML is a functional programming language with a proven-correct compiler and runtime system. This entry contains an unofficial version of the CakeML semantics that has been exported from the Lem specifications to Isabelle. Additionally, there are some hand-written theory files that adapt the exported code to Isabelle and port proofs from the HOL4 formalization, e.g. termination and equivalence proofs.
  - title: "Certifying Dictionary Construction in Isabelle/HOL"
    id: "dict"
    authors: ["lars"]
    doi: "10.3233/FI-2019-1859"
    in: "Fundamenta Informaticae"
    year: 2019
    abstract: |
      Type classes are a well-known extensions to various type systems. Classes usually participate in type inference; that is, the type checker will automatically deduce class constraints and select appropriate instances. Compilers for such languages face the challenge that concrete instances are generally not directly mentioned in the source text. In the runtime, type class operations need to be packaged into dictionaries that are passed around as pointers. This article presents the most common approach for compilation of type classes – the dictionary construction – carried out in a trustworthy fashion in Isabelle/HOL, a proof assistant.
  - title: "An Algebra for Higher-Order Terms"
    id: "afp-terms"
    authors: ["lars"]
    entry: "https://www.isa-afp.org/entries/Higher_Order_Terms.html"
    in: "Archive of Formal Proofs"
    year: 2019
    abstract: |
      In this formalization, I introduce a higher-order term algebra, generalizing the notions of free variables, matching, and substitution. The need arose from the work on a verified compiler from Isabelle to CakeML. Terms can be thought of as consisting of a generic (free variables, constants, application) and a specific part. As example applications, this entry provides instantiations for de-Bruijn terms, terms with named variables, and Blanchette’s λ-free higher-order terms. Furthermore, I implement translation functions between de-Bruijn terms and named terms and prove their correctness.
  - title: "A Verified Code Generator from Isabelle/HOL to CakeML"
    id: "afp-codegen"
    authors: ["lars"]
    entry: "https://www.isa-afp.org/entries/CakeML_Codegen.html"
    in: "Archive of Formal Proofs"
    year: 2019
    abstract: |
       This entry contains the formalization that accompanies my PhD thesis. I develop a verified compilation toolchain from executable specifications in Isabelle/HOL to CakeML abstract syntax trees. This improves over the state-of-the-art in Isabelle by providing a trustworthy procedure for code generation.
  - title: "Verified Code Generation from Isabelle/HOL"
    id: "phd-thesis_hupel"
    authors: ["lars"]
    year: 2019
    in: "Doctoral Dissertation"
    slides: "https://speakerdeck.com/larsrh/hol"
    extra:
      - link: "http://nbn-resolving.de/urn/resolver.pl?urn:nbn:de:bvb:91-diss-20190711-1473785-1-3"
        text: "Official copy"
    abstract: |
      In this thesis, I develop a verified compilation toolchain from executable specifications in Isabelle/HOL to CakeML abstract syntax trees.
      This improves over the state-of-the-art in Isabelle by providing a trustworthy procedure for code generation.
      The work consists of three major contributions.
      <br />
      First, I have implemented a certifying routine to eliminate type classes and instances in Isabelle specifications.
      Based on defining equations of constants, it derives new definitions that do not use type classes.
      This can be used to bypass an unverified step in the current code generator.
      <br />
      Second, I formalized an algebra for higher-order λ-terms that generalizes the notions of free variables, matching, and substitution.
      Terms can be thought of as consisting of a generic (free variables, constants, application) and a specific part (abstraction, bound variables).
      With this algebra, it becomes possible to reason abstractly over a variety of different types.
      <br />
      These two parts are independent from each other and can also be used for other purposes.
      For example, I have successfully instantiated the term algebra for other term types in the Isabelle universe.
      <br />
      Third, a compiler that works similarly to the existing code generator, but produces a CakeML abstract syntax tree together with a correctness theorem.
      More precisely, I have combined a simple proof producing translation of recursion equations in Isabelle into a deeply embedded term language with a fully verified compilation chain to the target language CakeML.

---
