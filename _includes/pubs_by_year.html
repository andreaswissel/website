{% assign found = false %}

{% capture year_content %}
  <ul>
    {% for topic in site.research %}
      {% for pub in topic.pubs %}
        {% if pub.year == include.year %}
          {% assign found = true %}
          <li>
            {% include pub.html layout="brief" %}
          </li>
        {% endif %}
      {% endfor %}
    {% endfor %}

    {% for pub in site.data.misc_pubs %}
      {% if pub.year == include.year %}
        {% assign found = true %}
        <li>
          {% include pub.html layout="brief" %}
        </li>
      {% endif %}
    {% endfor %}
  </ul>
{% endcapture %}

{% if found %}
  <br class="mb-2">
  {% include card.html content=year_content header=include.year %}
{% endif %}
